
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Criando serviços com o WSO2 - Parte 3 - WSO2 ESB - WSO2Brasil</title>
  <meta name="author" content="WSO2Brasil">

  
  <meta name="description" content="Hoje vamos finalizar o processo para criar um serviço com as ferramenta do WSO2, a última parte vamos publicar nosso serviço na BUS, dessa forma &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wso2brasil.com.br/blog/2010/10/criando-servicos-com-o-wso2-parte-3-wso2-esb/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="WSO2Brasil" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.colorbox.min.js" type="text/javascript"></script>
<link href="/stylesheets/colorbox.css" rel="stylesheet" type="text/css">

<script>
jQuery = jQuery.noConflict(true);
jQuery(document).ready( function() {
  var thumbnails = 'a:has(img)[href$=".bmp"],a:has(img)[href$=".gif"],a:has(img)[href$=".jpg"],a:has(img)[href$=".jpeg"],a:has(img)[href$=".png"],a:has(img)[href$=".BMP"],a:has(img)[href$=".GIF"],a:has(img)[href$=".JPG"],a:has(img)[href$=".JPEG"],a:has(img)[href$=".PNG"],a:has(img)[rel^="lightbox"]';
  jQuery(thumbnails).colorbox({
    transition: "none"
  });
});
</script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39120636-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/"><img src="/images/wso2brasil.png" /></a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com.br/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:wso2brasil.com.br" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Arquivos</a></li>
  <li><a href="/sobre">Sobre</a></li>
  <li><a href="/sobre/#contato">Contato</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
  
    <h1 class="entry-title"><a href="http://www.leandroprado.com.br/2010/10/criando-servicos-com-o-wso2-parte-3-wso2-esb/">Criando Serviços Com O WSO2 - Parte 3 - WSO2 ESB →</a></h1>
    



  <p class="meta">
    








  


<time datetime="2010-10-13T00:00:00-03:00" pubdate data-updated="true">Oct 13<span>th</span>, 2010</time>
    
     | <a href="#disqus_thread">Comments</a>
    
  </p>


  </header>


<div class="entry-content"><p>Hoje vamos finalizar o processo para criar um serviço com as ferramenta do WSO2, a última parte vamos publicar nosso serviço na BUS, dessa forma disponibilizando o serviço para nossos clientes.</p>

<p>No WSO2 ESB vamos criar um proxy service que será responsável por chamar nosso serviço Bussiness Service (WSO2 WSAS) que por sua vez vai chamar o nosso Data Service (WSO2 DS), essa parte é basicamente configuração não vamos codificar nenhuma linha de código.</p>

<p>Para expor nosso serviço na BUS vamos seguir os seguintes passos:</p>

<h2>1) Criar uma Sequence</h2>

<p>Um elemento de seqüência é usado para definir uma seqüência de mediadores que podem ser chamados mais tarde, nesse exemplo vamos criar uma sequence com um mediator de Log.</p>

<p>Entre na página de administração do ESB, selecione a opção Sequences.</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem1.png"><img class="size-thumbnail wp-image-668 aligncenter" title="Menu para criar uma Sequence" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem1.png" alt="" /></a></p>

<p>Clique na opção Add Sequence</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem2.png"><img class="aligncenter size-medium wp-image-669" title="Adicionar uma Sequence" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem2.png" alt="" width="701" height="227" /></a></p>

<p>Na tela Design Sequence, coloque o nome da sequence como RecursoHumanoSequence e agora vamos adicionar a sequência que vai ser executada, em nosso exemplo temos somente um Log, para isso clique em Add Child -&gt; Core -&gt; Log</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem3.png"><img class="aligncenter size-medium wp-image-670" title="Configurar a sequence" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem3.png" alt="" width="705" height="393" /></a></p>

<p>Depois de configurado a sequence, clique em Save, nossa sequence será listada na tela Mediation Sequences</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem4.png"><img class="aligncenter size-medium wp-image-671" title="Listagem das sequences" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem4.png" alt="" width="710" height="245" /></a></p>

<h2>2) Criar um EndPoint</h2>

<p>Um EndPoint é um destino específico de uma mensagem, também podemos ativar as estatísticas de endpoints e WSDL dos endereços.</p>

<p><strong>Atenção:</strong> Para adicionar um Endpoint, vamos precisar acessar o WSAS para recuperar o endereço do Endpoint do nosso serviço, na página de administração do WSAS entre em List e no serviço RecursoHumanoServico clique na opção WSDL1.1</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem7.png"><img class="aligncenter size-medium wp-image-674" title="Recuperando o WSDL do WSAS" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem7.png" alt="" width="720" height="285" /></a></p>

<p>O browser será aberto com o WSDL do serviço, no final está as configurações do Endpoint, copie esse endereço para que possamos colar na tela de criação do Endpoint na ESB.</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem8.png"><img class="aligncenter size-full wp-image-675" title="Recuperando o EndPoint" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem8.png" alt="" width="740" height="378" /></a></p>

<p>Agora vamos voltar ao administrador da ESB, clique na opção Endpoints</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem5.png"><img class="aligncenter size-full wp-image-672" title="Menu para criar o EndPoint" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem5.png" alt="" /></a></p>

<p>Na nova tela, clique em Address Endpoint</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem6.png"><img class="aligncenter size-medium wp-image-673" title="Adicionar um EndPoint" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem6.png" alt="" width="711" height="239" /></a></p>

<p>Adicione um nome RecursoHumanoEndPoint e coloque o endereço do Endpoint que recuperamos no WSAS, clique no botão Test para verificar a comunicação entre a ESB e o WSAS</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem9.png"><img class="aligncenter size-full wp-image-676" title="Configurando o EndPoint" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem9.png" alt="" width="718" height="258" /></a></p>

<p>Clique em Save</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem10.png"><img class="aligncenter size-full wp-image-677" title="Salvando o EndPoint" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem10.png" alt="" width="720" height="184" /></a></p>

<p>Veja nosso Endpoint na listagem</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem11.png"><img class="aligncenter size-full wp-image-678" title="Listagem dos EndPoints" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem11.png" alt="" width="721" height="192" /></a></p>

<h2>3) Criar o Proxy</h2>

<p>Clique na opção Add -&gt; Proxy Service</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem12.png"><img class="aligncenter size-full wp-image-679" title="Menu para criar um Proxy" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem12.png" alt="" /></a></p>

<p>Temos várias opções para criar proxy, clique na opção Custom Proxy</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem13.png"><img class="aligncenter size-full wp-image-680" title="Adicionar um Custom Proxy" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem13.png" alt="" width="722" height="258" /></a></p>

<p>Vamos configurar nosso proxy da sequinte maneira</p>

<ul>
<li>Proxy Service Name: RecursoHumanoServico</li>
<li>Publishing WSDL: Specify source URL</li>
<li>WSDL URI: Coloque o endereço do WSDL do WSAS, aonde verificamos anteriormente</li>
</ul>


<p>Depois clique em Next</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem14.png"><img class="aligncenter size-full wp-image-681" title="Configurando o Proxy" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem14.png" alt="" width="722" height="543" /></a></p>

<p>Nessa tela vamos configurar a Sequence e o Endpoint que ja criamos anteriormente.</p>

<ul>
<li>In Sequence Options: Selecione Import e na combo selecione a Sequence criada anteriormente</li>
<li>Endpoint Options: Selecione Import e na combo selecione o Endpoint criado anteriormente</li>
</ul>


<p>Depois clique em Next</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem15.png"><img class="aligncenter size-full wp-image-682" title="Referência a Sequence e ao EndPoint" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem15.png" alt="" width="724" height="394" /></a></p>

<p>Nessa tela não alteramos nada, deixe as duas opções marcadas None, e clique em Finish</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem16.png"><img class="aligncenter size-full wp-image-683" title="Finalizar a configuração" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem16.png" alt="" width="719" height="384" /></a></p>

<p>Veja na listagem no nosso proxy criado.</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem17.png"><img class="aligncenter size-full wp-image-684" title="Listagem dos Proxys" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem17.png" alt="" width="723" height="315" /></a></p>

<h2>4) Testando o serviço</h2>

<p>Para testar o serviço clique em Try this service, preencha o campo nome e clique no botão.</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem18.png"><img class="aligncenter size-full wp-image-685" title="Teste  do serviço" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem18.png" alt="" width="721" height="456" /></a></p>

<p>Quando clicamos no botão fazemos o seguinte caminho:</p>

<p> # A BUS recebe a requisição
 # Encaminha para o WSAS
 # Valida os dados
 # Chama o DS
 # Retorna os dados para o WSAS
 # Executa regra de negócio
 # Retorna os dados para a BUS</p>

<p>Vamos testar a Exception, não coloque nenhum valor para o parâmetro nome e clique no botão</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem19.png"><img class="aligncenter size-full wp-image-686" title="Teste da Exception" src="http://www.leandroprado.com.br/wp-content/uploads/2010/10/ESB_imagem19.png" alt="" width="718" height="309" /></a></p>

<p>Nesse caso fizemos o seguinte caminho:</p>

<p> # A BUS recebe a requisição
 # Encaminha para o WSAS
 # Valida os dados
 # Retorna erro para a BUS</p>

<p>Chegamos ao fim desse peque How To de como criar um serviço usando as ferramenta do WSO2, espero que possa ter esclarecido as dúvidas. Se ainda tiverem alguma dúvida ou  alguma sugestão, critica favor entre em contato!</p>

<p>Um Abraço!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Leandro Prado</span></span>

      








  


<time datetime="2010-10-13T00:00:00-03:00" pubdate data-updated="true">Oct 13<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categorias/desenvolvimento/'>desenvolvimento</a>
  
</span>


      

<span class="tags">
  
    <a class='tag' href='/blog/tags/enterprise-service-bus/'>enterprise service bus</a>, <a class='tag' href='/blog/tags/esb/'>esb</a>, <a class='tag' href='/blog/tags/wso2/'>wso2</a>
  
</span>

    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://wso2brasil.com.br/blog/2010/10/criando-servicos-com-o-wso2-parte-3-wso2-esb/" data-via="wso2brasil" data-counturl="http://wso2brasil.com.br/blog/2010/10/criando-servicos-com-o-wso2-parte-3-wso2-esb/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2010/10/criando-servicos-com-o-wso2-parte-2-wso2-wsas/" title="Previous Post: Criando serviços com o WSO2 - Parte 2 - WSO2 WSAS">&laquo; Criando serviços com o WSO2 - Parte 2 - WSO2 WSAS</a>
      
      
        <a class="basic-alignment right" href="/blog/2010/10/configurando-o-wso2-com-postgresql/" title="Next Post: Configurando o WSO2 com PostgreSQL">Configurando o WSO2 com PostgreSQL &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/10/resenha-soa-aplicado-integrando-com-web-services-e-alem/">Resenha: SOA aplicado: Integrando com web services e além</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/8o-solisc-nos-vemos-la/">8º SoLiSC - Nos vemos lá</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/lancado-wso2-user-engagement-server-1-0-0/">Lançado: WSO2 User Engagement Server - 1.0.0!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/nos-no-fisl-14/">Nós no FISL14</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/participaremos-do-fisl-14/">Participaremos do FISL 14</a>
      </li>
    
  </ul>
</section>

<section>
    <h1>Related Posts</h1>
    <ul class="posts">
    
        <li class="related">
        <a href="/blog/2013/03/agendamento-de-tarefas-na-wso2-enterprise-service-bus/">Agendamento de tarefas na WSO2 Enterprise Service Bus</a>
        </li>
    
        <li class="related">
        <a href="/blog/2012/11/treinamento-celepar/">Treinamento: Celepar</a>
        </li>
    
        <li class="related">
        <a href="/blog/2010/10/serie-criando-servicos-com-wso2/">Série criando serviços com WSO2</a>
        </li>
    
        <li class="related">
        <a href="/blog/2010/05/plataforma-wso2/">Plataforma WSO2</a>
        </li>
    
        <li class="related">
        <a href="/blog/2010/04/wso2-enterprise-service-bus-manipulando-erros-em-endpoints/">WSO2 Enterprise Service Bus - Manipulando erros em Endpoints</a>
        </li>
    
    </ul>
</section>
<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/categorias/arquitetura'>arquitetura (9)</a></li><li><a href='/blog/categorias/avisos'>avisos (3)</a></li><li><a href='/blog/categorias/desenvolvimento'>desenvolvimento (29)</a></li><li><a href='/blog/categorias/eventos'>eventos (6)</a></li></ul>
</section>
<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/tags/codigo-aberto' style='font-size: 108.57142857142857%'>código aberto(6)</a> <a href='/blog/tags/oracle' style='font-size: 105.71428571428571%'>oracle(4)</a> <a href='/blog/tags/lancamento' style='font-size: 107.14285714285714%'>lançamento(5)</a> <a href='/blog/tags/enterprise-service-bus' style='font-size: 112.85714285714286%'>enterprise service bus(9)</a> <a href='/blog/tags/identity' style='font-size: 105.71428571428571%'>identity(4)</a> <a href='/blog/tags/wso2' style='font-size: 160.0%'>wso2(42)</a> <a href='/blog/tags/wso2-carbon' style='font-size: 110.0%'>wso2 carbon(7)</a> <a href='/blog/tags/wsas' style='font-size: 107.14285714285714%'>wsas(5)</a> <a href='/blog/tags/bam' style='font-size: 105.71428571428571%'>bam(4)</a> <a href='/blog/tags/eclipse' style='font-size: 107.14285714285714%'>eclipse(5)</a> <a href='/blog/tags/dss' style='font-size: 130.0%'>dss(21)</a> <a href='/blog/tags/carbon' style='font-size: 107.14285714285714%'>carbon(5)</a> <a href='/blog/tags/software-livre' style='font-size: 108.57142857142857%'>software livre(6)</a> <a href='/blog/tags/instalacao' style='font-size: 104.28571428571429%'>instalação(3)</a> <a href='/blog/tags/application-server' style='font-size: 107.14285714285714%'>application server(5)</a> <a href='/blog/tags/stratos' style='font-size: 104.28571428571429%'>stratos(3)</a> <a href='/blog/tags/soa' style='font-size: 110.0%'>soa(7)</a> <a href='/blog/tags/java' style='font-size: 104.28571428571429%'>java(3)</a> <a href='/blog/tags/esb' style='font-size: 118.57142857142857%'>esb(13)</a> <a href='/blog/tags/data-services' style='font-size: 128.57142857142858%'>data services(20)</a> </span>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("wso2brasil", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/wso2brasil" class="twitter-follow-button" data-show-count="false">Follow @wso2brasil</a>
  
</section>


<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/wso2brasil">@wso2brasil</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'wso2brasil',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - WSO2Brasil -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wso2brasil';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
