
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>WSO2Brasil</title>
  <meta name="author" content="WSO2Brasil">

  
  <meta name="description" content="Versões novas de produtos sempre são uma alegria, seja pelos
recursos novos ou somente pela novidade que sempre alegra-nos, principalmente
nós &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wso2brasil.com.br/blog/page/3/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="WSO2Brasil" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.colorbox.min.js" type="text/javascript"></script>
<link href="/stylesheets/colorbox.css" rel="stylesheet" type="text/css">

<script>
jQuery = jQuery.noConflict(true);
jQuery(document).ready( function() {
  var thumbnails = 'a:has(img)[href$=".bmp"],a:has(img)[href$=".gif"],a:has(img)[href$=".jpg"],a:has(img)[href$=".jpeg"],a:has(img)[href$=".png"],a:has(img)[href$=".BMP"],a:has(img)[href$=".GIF"],a:has(img)[href$=".JPG"],a:has(img)[href$=".JPEG"],a:has(img)[href$=".PNG"],a:has(img)[rel^="lightbox"]';
  jQuery(thumbnails).colorbox({
    transition: "none"
  });
});
</script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39120636-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/"><img src="/images/wso2brasil.png" /></a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com.br/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:wso2brasil.com.br" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Arquivos</a></li>
  <li><a href="/sobre">Sobre</a></li>
  <li><a href="/sobre/#contato">Contato</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
  
    <h1 class="entry-title"><a href="/blog/2010/06/compilando-o-wso2-carbon-3-0-0-e-corrigindo-o-wso2-data-services-server-2-5-0/">Compilando O WSO2 Carbon 3.0.0 E Corrigindo O WSO2 Data Services Server 2.5.0</a></h1>
    
    


  <p class="meta">
    








  


<time datetime="2010-06-16T10:17:12-03:00" pubdate data-updated="true">Jun 16<span>th</span>, 2010</time>
    
     | <a href="/blog/2010/06/compilando-o-wso2-carbon-3-0-0-e-corrigindo-o-wso2-data-services-server-2-5-0/#disqus_thread">Comments</a>
    
  </p>


  </header>


  <div class="entry-content"><p><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/06/wso2-data-services-server.gif" alt="" />Versões novas de produtos sempre são uma alegria, seja pelos
recursos novos ou somente pela novidade que sempre alegra-nos, principalmente
nós desenvolvedores. Mas juntamente com as novas versões (principalmente nos
primeiros releases) vem também problemas, bugs ou incompatibilidade de
versões- os problemas mais comuns.</p>

<p>E para não pararmos no tempo, vendo que <a href="/2010/04/novidades-do-proximo-wso2-data-services-server-2-5-x/">as novidades do WSO2 Data Services Server 2.5.0</a>
seriam muito bem vindas para nós, resolvemos realizar testes para verificar a
possibilidade de atualizarmos nossa versão da 2.2.1 para a 2.5.0, e surgiu
aquela alegria quando vimos que não teríamos problemas de incompatibilidade
como ocorreu nos testes de migração da 2.0 para <a href="/2009/12/testes-na-versao-2-2-0-do-wso2-data-services-server/">WSO2 Data Services Server 2.2.1</a>.</p>

<p>Mas como nem tudo são rosas, um velho <em>bug</em> conhecido nosso na versão 2.0 e
discutido no <a href="http://wso2.org/forum/thread/5349">fórum - de não aceitar valores <em>null</em></a>, tinha sido corrigido na versão
2.2.1; mas resolveu dar as caras na versão 2.5.0. E por necessitarmos das
novidades dessa versão, tivemos que correr atrás e corrigir o problema, já
corrigido anteriormente.</p>

<p><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/06/wso2-carbon.gif" alt="" />Como já
conhecemos a estrutura, fomos direto ao site do projeto para realizar o
<a href="http://wso2.org/downloads/data-services-server">download do fonte do WSO2 Data Services Server</a> e fomos atrás do arquivo problemático (SQLQuery.java).
Mas para nossa surpresa, o arquivo não estava mais lá, foi centralizado no
projeto <a href="http://wso2.org/downloads/carbon">WSO2 Carbon</a>.</p>

<p>Então com o arquivo de <a href="http://dist.wso2.org/products/carbon/3.0.0/wso2carbon-3.0.0-src.zip">código-fonte do WSO2 Carbon
3.0.0</a>
devidamente baixado, vamos colocar a mão na massa.</p>

<h2>Baixando e descompactando o fonte</h2>

<pre><code>wget http://dist.wso2.org/products/carbon/3.0.0/wso2carbon-3.0.0-src.zip
unzip wso2carbon-3.0.0-src.zip
</code></pre>

<h2>Baixando e aplicando o <em>patch</em></h2>

<pre><code>wget /wp-content/uploads/2010/06/wso2-dataservices-accept-null.txt
cd wso2carbon-3.0.0-src patch -p1 wso2-dataservices-accept-null.patch
</code></pre>

<p>E a mensagem recebida aqui será algo como:</p>

<pre><code>patching file components/data-services/org.wso2.carbon.dataservices.core/3.0.0/src/main/java/org/wso2/carbon/dataservices/dispatch/query/SQLQuery.java
</code></pre>

<h2>Compilando o componente</h2>

<p>Levando em consideração que você tenha as dependências necessárias, vai ser um
passo bem demorado. Vai fazer download de alguns pacotes, compilar, testar e
gerar uma nova versão do componente, com a correção.</p>

<pre><code>cd components/data-services
mvn install
</code></pre>

<h2>Corrigindo o Data Services Server</h2>

<p>Agora que temos o componente corrigido e devidamente compilado, vamos copiá-lo
para a instância do WSO2 Data Services Server (levando em consideração que
minha instalação fica em ~/Applications/wso2/wso2dataservices-2.5.0).</p>

<pre><code>cp org.wso2.carbon.dataservices.core/3.0.0/target/org.wso2.carbon.dataservices.core-3.0.0.jar ~/Applications/wso2/wso2dataservices-2.5.0/wso2dataservices-2.5.0/repository/components/plugins/org.wso2.carbon.dataservices.core-3.0.0.jar
cp org.wso2.carbon.dataservices.ui/3.0.0/target/org.wso2.carbon.dataservices.ui-3.0.0.jar ~/Applications/wso2/wso2dataservices-2.5.0/wso2dataservices-2.5.0/repository/components/plugins/org.wso2.carbon.dataservices.ui-3.0.0.jar
</code></pre>

<h2>Conclusão</h2>

<p>Com o <em>patch</em> criado, testado e aplicado. Abrimos um <a href="https://wso2.org/jira/browse/CARBON-7589">pedido de correção no JIRA do WSO2</a>, para que eles possam
corrigir na próxima <em>release</em> (provavelmente a 2.5.1). Caso você não tenha
disponibilidade (de tempo ou paciência), pode baixar os componente do WSO2
Data Services Server corrigido (bastando apenas descompactá-los).</p>

<ul>
<li><a href="/wp-content/uploads/2010/06/carbon-dataservices-core-3.0.0.tar.gz">org.wso2.carbon.dataservices.core-3.0.0.jar</a></li>
<li><a href="/wp-content/uploads/2010/06/carbon-dataservices-ui-3.0.0.tar.gz">org.wso2.carbon.dataservices.ui-3.0.0.jar</a></li>
</ul>


<p>E tenho que falar, viva o código aberto e o software livre! (;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
  
    <h1 class="entry-title"><a href="/blog/2010/06/lancamento-do-wso2-stratos-alpha/">Lançamento Do WSO2 Stratos (Alpha)</a></h1>
    
    


  <p class="meta">
    








  


<time datetime="2010-06-01T15:50:24-03:00" pubdate data-updated="true">Jun 1<span>st</span>, 2010</time>
    
     | <a href="/blog/2010/06/lancamento-do-wso2-stratos-alpha/#disqus_thread">Comments</a>
    
  </p>


  </header>


  <div class="entry-content"><p><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/06/wso2-stratos.png" alt="" />O
pessoal do <a href="http://wso2.org">WSO2</a> anda com todo o vapor mesmo, hoje foi
lançado (versão <em>alpha</em> ainda) o <a href="http://wso2.com/cloud/stratos/">WSO2 Stratos</a>, toda a plataforma rodando em <em>cloud
computing</em>, ou seja, tudo &#8220;empacotado&#8221; e pronto para rodar, sem dependência de
hardware e instalações.</p>

<p>Você pode conseguir maiores informações no site do produto <a href="http://wso2.com/cloud/stratos/">WSO2 Stratos</a> (em inglês) e, também, testar tudo
funcionando (lembrando que não é uma versão final ainda) fazendo seu cadastro
- grátis. <a href="http://cloud.wso2.com/">Testar o WSO2 Stratos</a>.</p>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/06/wso2-stratos-home.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/06/wso2-stratos-home-300x228.png" alt="" /></a></p>

<p>Os produtos lançados nesse formato são:</p>

<ul>
<li>Governance</li>
<li>Identity</li>
<li>Application Server</li>
<li>Gadgets</li>
<li>Mashup Server</li>
<li>Business Activity Monitor</li>
<li>Enterprise Service Bus</li>
</ul>


<p>Assim que sobrar um tempo vou ver como ficariam implementações utilizando a
versão livre deles e ver até onde ela está liberada para ser utilizada. E
também a dificuldade de trabalhar dessa forma.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
  
    <h1 class="entry-title"><a href="http://www.leandroprado.com.br/2010/05/plataforma-wso2/">Plataforma WSO2 →</a></h1>
    
    


  <p class="meta">
    








  


<time datetime="2010-05-31T00:00:00-03:00" pubdate data-updated="true">May 31<span>st</span>, 2010</time>
    
     | <a href="/blog/2010/05/plataforma-wso2/#disqus_thread">Comments</a>
    
  </p>


  </header>


  <div class="entry-content"><p style="text-align: justify;">Neste post vou descrever o que cada solução do WSO2 é responsável.</p>


<table border="0">
<tbody>
<tr>
<td style="width: 250px;">
<h3>WSO2 Enterprise Service Bus</h3>
</td>
<td><img src="http://www.leandroprado.com.br/wp-content/uploads/2010/05/mini-esb-logo.gif" alt="WSO2 Enterprise Service Bus" /></td>
</tr>
</tbody>
</table>


<p style="text-align: justify;">WSO2 ESB permite aos administradores de sistema e arquitetos de SOA de forma simples e fácil configurar o roteamento de mensagens, a virtualização, a intermediação, transformação, logs de requisições, agendamento de tarefas, balanceamento de carga, mediação de eventos e muito mais.</p>


<table>
<tbody>
<tr>
<td style="width: 240px;">
<h3>WSO2 Governance Registry</h3>
</td>
<td><img src="http://www.leandroprado.com.br/wp-content/uploads/2010/05/mini-registry-logo.gif" alt="WSO2 Governance Registry" /></td>
</tr>
</tbody>
</table>


<p style="text-align: justify;">Responsável por manter o controle de sua arquitetura SOA como um repositório de metadados, suporte para controle de versão, gestão de ciclo de vida, um modelo avançado para usuários / papéis / permissões, e as características sociais, tais como marcação, classificação e comentários. WSO2  Governance Registry se integra com outros produtos WSO2 para coletar metadados sobre serviços, centraliza a política de metadados, e gerencia dependências.</p>


<table>
<tbody>
<tr>
<td style="width: 190px;">
<h3>WSO2 Identity Server</h3>
</td>
<td><img src="http://www.leandroprado.com.br/wp-content/uploads/2010/05/mini-is-logo.gif" alt="WSO2 Identity Server" /></td>
</tr>
</tbody>
</table>


<p style="text-align: justify;">A WSO2 Identity Server é o servidor de gerenciamento de identidade e direito. Ele suporta cartões de Informação e OpenID para autenticação, bem como autorização para XACML. Pode ser integrada facilmente com LDAP ou Active Directory.</p>


<table>
<tbody>
<tr>
<td style="width: 260px;">
<h3>WSO2 Business Activity Monitor</h3>
</td>
<td><img src="http://www.leandroprado.com.br/wp-content/uploads/2010/05/mini-bam-logo.gif" alt="WSO2 Business Activity Monitor" /></td>
</tr>
</tbody>
</table>


<p style="text-align: justify;">A WSO2 Business Activity Monitor (BAM WSO2) serve para suprir as necessidades dos especialistas em TI acompanharem e entenderem as atividades de negócios dentro de uma implantação SOA com isso permite que as organizações sejam pró-ativa ao invés de ser reativo.</p>


<table>
<tbody>
<tr>
<td style="width: 180px;">
<h3>WSO2 Gadgat Server</h3>
</td>
<td><img src="http://www.leandroprado.com.br/wp-content/uploads/2010/05/mini-gs-logo.gif" alt="WSO2 Gadgat Server" /></td>
</tr>
</tbody>
</table>


<p style="text-align: justify;">O Gadgat WSO2 Server permite que você possa oferecer aos seus executivos, funcionários, parceiros ou clientes uma maneira de obter todas as informações em um único lugar que eles precisam. Pordemos criar vários paineis para cada usuário permitindo-lhe adicionar, personalizar e reorganizar seus gadgets, assim como agrupá-las em conjuntos de tabulação.</p>


<table>
<tbody>
<tr>
<td style="width: 250px;">
<h3>WSO2 Business Process Server</h3>
</td>
<td><img src="http://www.leandroprado.com.br/wp-content/uploads/2010/05/mini-bps-logo.gif" alt="WSO2 Business Process Server" /></td>
</tr>
</tbody>
</table>


<p style="text-align: justify;">A WSO2 Business Process Server é um servidor responsável por executar os processos de negócios, são escritos usando o padrão WS-BPEL. Oferece um completo console gráfico para implantar, gerenciar e visualizar os processos, além de gerenciar e exibir instâncias do processo.</p>


<table>
<tbody>
<tr>
<td style="width: 180px;">
<h3>WSO2 Mashup Server</h3>
</td>
<td><img src="http://www.leandroprado.com.br/wp-content/uploads/2010/05/mini-mashup-logo.gif" alt="" /></td>
</tr>
</tbody>
</table>


<p style="text-align: justify;">A WSO2 Mashup Server fornece uma plataforma para uma rápida implantação de serviços Web Mashups.  Combinando mashups simples, mas rica de reutilização, segurança, confiabilidade e governação, a WOS2 Mashup Server oferece a composição de serviços de classe empresarial. O servidor Mashup é voltada para desenvolvedores web (HTML + Javascript / competências XML) que permite um rápido desenvolvimento e compartilhamento de novos serviços.</p>


<table>
<tbody>
<tr>
<td style="width: 180px;">
<h3>WSO2 Data Services</h3>
</td>
<td><img src="http://www.leandroprado.com.br/wp-content/uploads/2010/05/mini-ds-logo.gif" alt="WSO2 Data Services" /></td>
</tr>
</tbody>
</table>


<p style="text-align: justify;">A WSO2 Data Services fornece uma plataforma fácil de usar para criar serviços responsáveis por buscar os dados armazenados em locais heterogêneos, como banco de dados, arquivos CSV, Excel ou XML, permitindo a fácil integração de dados em processos de negócios, mashups, gadgets aplicações, BI e todos os serviços em geral.</p>


<table>
<tbody>
<tr>
<td style="width: 320px;">
<h3>WSO2 Web Services Application Server</h3>
</td>
<td><img src="http://www.leandroprado.com.br/wp-content/uploads/2010/05/mini-wsas-logo.gif" alt="WSO2 Web Services Application Server" /></td>
</tr>
</tbody>
</table>


<p style="text-align: justify;">WSO2 WSAS é um servidor de aplicativos para web services. Com o seu servidor Web incorporado de alto desempenho, suporte completo para XML, SOAP, WSDL, e suporte para comunicações confiáveis, seguras, WSO2 WSAS torna simples e eficaz para criar, consumir e gerenciar Web Services. tanbém podemos expor aplicativos como serviços na forma de POJOs ou JARs</p>


<p style="text-align: justify;">Além dessas soluções, o WSO2 possui frameworks para fornecer aos desenvolvedores a infra-estrutura para criar e consumir serviços em sua linguagem de programação favorita como C, C++, PHP ou Spring.</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
  
    <h1 class="entry-title"><a href="http://www.leandroprado.com.br/2010/05/wso2-data-services/">WSO2 Data Services →</a></h1>
    
    


  <p class="meta">
    








  


<time datetime="2010-05-26T00:00:00-03:00" pubdate data-updated="true">May 26<span>th</span>, 2010</time>
    
     | <a href="/blog/2010/05/wso2-data-services/#disqus_thread">Comments</a>
    
  </p>


  </header>


  <div class="entry-content"><p>Quanto estamos construindo um sistema temos que nos preocupar em qual abordagem de acesso aos dados vamos utilizar, tais como Enterprise Java Beans (EJBs), CORBA e Hibernate, cada um procura uma abordagem diferente para obtenção de dados, para SOA essa abordagem deve ser simples, para que possamos concentrar nossos esforços na implementação das funcionalidades de negócios.</p>

<h3><img class="aligncenter size-full wp-image-95" title="dataservices" src="http://www.leandroprado.com.br/wp-content/uploads/2010/05/dataservices.gif" alt="" width="558" height="291" />Porque Data Services?</h3>


<p>Os dados são o sangue da vida de uma empresa, por esse motivo eles devem sem bem armazenados e seguros. Geralemente em SOA (Service Oriented Architecture) temos que ter acesso à dados armazenados em fontes de dados heterogêneas.</p>

<p>Data Services essencialmente tira o esforço de desenvolver um mecanismo de acesso a dados para diferentes aplicações, ou seja, é um mecanismo para levar os dados armazenados em bases de dados relacionais, arquivos de Excel e arquivos de CSV e torná-los facilmente disponíveis como WebServices ou como REST.</p>

<p>Na sua essência os Data Services são responsáveis por quebrar a frágil ligação entre as aplicações e dados. Com o Data Services, dados e as aplicações existem isoladamente, mas podem colaborar quando necessário com isso temos a capacidade de manipular os mesmos dados de forma diferente quando solicitados por diferentes canais.</p>

<h2>Beneficios do Data Services</h2>

<ul>
<li>Fácil extrasão de dados de bases relacionais através de JDBC, além de arquivos como Excel, CSV e XML;</li>
<li>Gera um arquivo único de mapeamento no formato XML para expor os dados em vários formatos diferentes e protocolos, sem a necessidade de programação redundante para acesso múltiplo diferentes tecnologias de banco de dados;</li>
<li>Expõe seus dados como os serviços estilo Web Services ou recursos REST. Através de XML sobre HTTP, os dados podem até ser exposto como JSON (JavaScript Object Notation), tornando muito mais fácil para construir interfaces Ajax;</li>
<li>Gerar acesso transparente e unificado de um repositório consistente, que proporciona maior acessibilidade aos dados da empresa.</li>
</ul>


<p>Para manipular o WSO2 Data Services temos o DSDL (Data Services Description Language) que permite especificar como as entradas das solicitações serão mapeadas e controlar como os resultados serão mostrados para o usuário.</p>

<h2>Performance</h2>

<p>O WSO2 Data Services armazena em cache as solicitações mais usadas para ser recuperado por chamadas semelhantes subseqüentes, também é capaz de forçar um flush cache, caso as circunstâncias requerer o esvaziamento de cache de dados.</p>

<h2>Segurança</h2>

<p>WSO2 Data Services oferece suporte a segurança em nível de elemento e segurança baseada em função de indivíduos e grupos no acesso aos dados, incluindo a assinatura digital, criptografia e diversas outros tokens de segurança.</p>

<h2>Conclusão</h2>

<p>WSO2 Data Services é uma abordagem para o tratamento de dados da empresa como um serviço de primeira classe empresarial. Ele encapsula toda a lógica que executa a descoberta de dados, acesso a dados, validação de dados, segurança em uma camada de abstração simples.</p>

<p>WSO2 Data Services ajuda a criar serviços com rapidez e facilidade para o consumo de um serviço orientada a arquitetura.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
  
    <h1 class="entry-title"><a href="http://www.leandroprado.com.br/2010/05/ferramentas-soa-open-source/">Ferramentas SOA Open Source →</a></h1>
    
    


  <p class="meta">
    








  


<time datetime="2010-05-19T00:00:00-03:00" pubdate data-updated="true">May 19<span>th</span>, 2010</time>
    
     | <a href="/blog/2010/05/ferramentas-soa-open-source/#disqus_thread">Comments</a>
    
  </p>


  </header>


  <div class="entry-content"><p>Quando decidimos criar um ambiente SOA, um dos requisitos impostos pela maioria dos diretores é se é uma solução livre, ou seja, OpenSource. Partindo desse pré-requisito, pesquisamos algumas ferramentas que poderíamos utilizar.</p>

<p>A primeira ferramenta que testamos foi o Intalio, que, na verdade, é uma ferramenta de BPM em que podemos modelar os processos em BPEL e depois fazer um deploy como um serviço para expor na BUS. Um dos problemas que encontramos com essa ferramenta, foi que não conseguimos levantar uma excessão e retornar para o usuário.</p>

<p>Também estudamos o Mule, que é uma BUS para expor todos os serviços criados a partir do Intalio.</p>

<p>Outra opção foi o JBOSS SOA Plataform; chegamos a fazer um piloto com consultores da Red Hat, porém não supriu todas as nossas necessidades, tinhamos os mesmos problemas da ferramenta Intalio.</p>

<p>Até que descobrimos uma ferramenta chamada WSO2, a qual possui várias ferramentas para SOA como DataServices, Business Process Server, Web Services Application, Governance Registry, Enterprise Service Bus, etc.</p>

<p>A grande vantagem de usar o WSO2 é que temos um grande suporte em fóruns, e-mail, acesso ao código-fonte e atualizações frequentes de suas ferramentas, isso significa que os desenvolvedores estão aprimorando cada vez mais cada uma das ferramentas.</p>

<p>Outra grande vantagem é a sua fácil instalação, na maioria das vezes é necessário somente descompactar a pasta e iniciar o serviço que o servidor já está funcionando.</p>

<p>Atualmente estamos usando DataServices, Web Services Application, Governance Registry e Enterprise Service Bus, todos rodando em um mesmo servidor, porém em portas diferentes.</p>

<p>Veja abaixo a solução completa que o WSO2 implementa.</p>

<p><a href="http://www.leandroprado.com.br/wp-content/uploads/2010/05/product-platform.gif"><img class="aligncenter" src="http://www.leandroprado.com.br/wp-content/uploads/2010/05/product-platform.gif" title="Plataforma WSO2" alt="Plataforma WSO2" /></a></p>

<p>Nos próximos posts vou explicar a funcionalidade de cada produto.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
  
    <h1 class="entry-title"><a href="/blog/2010/05/utilizando-o-array-type-do-wso2-data-services-server-2-5-x/">Utilizando O Array Type Do WSO2 Data Services Server 2.5.x</a></h1>
    
    


  <p class="meta">
    








  


<time datetime="2010-05-06T18:27:32-03:00" pubdate data-updated="true">May 6<span>th</span>, 2010</time>
    
     | <a href="/blog/2010/05/utilizando-o-array-type-do-wso2-data-services-server-2-5-x/#disqus_thread">Comments</a>
    
  </p>


  </header>


  <div class="entry-content"><p>Uma das <a href="/2010/04/novidades-do-proximo-wso2-data-services-server-2-5-x/">novidades do WSO2 Data Services Server 2.5.x</a>, já listada anteriormente, é que
agora poderemos trabalhar com <em>Array Types</em>. Essa opção não existia
anteriormente e as únicas maneiras que tínhamos para contornar, digamos que
não eram muito legais. Por exemplo: invocar várias vezes o método ou
concatenar as várias entradas em um campo <em>string</em> e posteriormente (em uma
<em>procedure</em> ou algo do gênero) realizar o <em>parser</em>.</p>

<p>Ambas tem seus problemas, muitas requisições invocando várias vezes ou
dificuldade de implementação (dependendo do banco de dados) para o caso de
realizar o <em>parser</em> na <em>procedure</em>; mas, de uma forma ou outra, resolviam o
problema. Só que com a implementação de <em>Array Type</em> resolvemos esse problema
de maneira simples, eficiente e elegante!</p>

<h2>Colocando a mão na massa</h2>

<p>Digamos que temos um serviço onde nosso cliente quer listar vários produtos,
nosso cliente tem todos os códigos dos produtos e quer o restante dos dados.
Antigamente passaríamos para ele um método <em>productById</em> que recebe um <em>id</em>,
algo como abaixo:</p>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/05/try-it-method-productById-without-array-type.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/05/try-it-method-productById-without-array-type-150x150.png" alt="" /></a>
<a href="http://assets.mcorp.com.br/wp-content/uploads/2010/05/soap-ui-method-productById-without-array-type.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/05/soap-ui-method-productById-without-array-type-150x150.png" alt="" /></a></p>

<p>Mas agora tudo foi facilitado, vamos a &#8220;mágica&#8221;! Para alteração do método que
aceite a entrada de um <em>Array Type</em>, serão necessários apenas dois passos.</p>

<h3>Passo 1: editando a <em>query</em></h3>

<p>Teremos que trocar a <em>query</em> que antigamente aceitava apenas um parâmetro como
entrada &#8220;id = :id&#8221; e colocaremos uma que aceita &#8220;N&#8221; parâmetros &#8220;id in (:id)&#8221;.
Então na tela de edição da <em>query</em> do WSO2 Data Services Server, basta
trocarmos, como fiz abaixo:</p>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/05/query-without-array.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/05/query-without-array-150x150.png" alt="" /></a> <a href="http://assets.mcorp.com.br/wp-content/uploads/2010/05/query-with-array.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/05/query-with-array-150x150.png" alt="" /></a></p>

<h3>Passo 2: editando o tipo da entrada</h3>

<p>E o segundo passo, editando os <em>Input Mappings,</em> basta trocarmos o tipo
<em>scalar</em> para <em>array</em>, novamente, como fiz abaixo:</p>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/05/input-scalar.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/05/input-scalar-150x150.png" alt="" /></a> <a href="http://assets.mcorp.com.br/wp-content/uploads/2010/05/input-array.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/05/input-array-150x150.png" alt="" /></a></p>

<h2>O resultado</h2>

<p>E agora vamos a parte legal: o resultado!</p>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/05/try-it-method-productById-with-array-type.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/05/try-it-method-productById-with-array-type-150x150.png" alt="" /></a>
<a href="http://assets.mcorp.com.br/wp-content/uploads/2010/05/soap-ui-method-productById-with-array-type.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/05/soap-ui-method-productById-with-array-type-150x150.png" alt="" /></a></p>

<h2>Conclusão</h2>

<p>Essa implementação facilitou muito e melhorou a qualidade de nossos serviços.
Ainda não foi lançada a versão final, apenas algumas <em>releases candidates</em>,
que podem ser acompanhadas pelo <a href="http://builder.wso2.org/~carbon/releases/carbon/3.0.0/">repositório de <em>builders</em> do WSO2 Carbon 3.0.0</a>.</p>

<p>Deixo aqui o <a href="http://assets.mcorp.com.br/wp-content/uploads/2010/05/wso2tutorial-array-type.zip">download dos arquivos utilizados para implementar o <em>Array Type</em></a> nesse exemplo, contém os arquivos abaixo:</p>

<ul>
<li><em>Data Service</em> antes da implementação do <em>Array Type</em></li>
<li><em>Data Service</em> depois da implementação do <em>Array Type</em></li>
<li>Script de criação do banco de dados utilizado (MySQL)</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
  
    <h1 class="entry-title"><a href="/blog/2010/04/instalando-o-wso2-web-services-framework-for-php-2-0-0/">Instalando O WSO2 Web Services Framework for PHP (2.0.0)</a></h1>
    
    


  <p class="meta">
    








  


<time datetime="2010-04-20T21:47:45-03:00" pubdate data-updated="true">Apr 20<span>th</span>, 2010</time>
    
     | <a href="/blog/2010/04/instalando-o-wso2-web-services-framework-for-php-2-0-0/#disqus_thread">Comments</a>
    
  </p>


  </header>


  <div class="entry-content"><p><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wsf-php.gif" alt="" />Como eu disse anteriormente, em <a href="http://www.mcorp.com.br/2010/03/consumindo-um-servico-seguro-utilizando-php/">Consumindo um serviço seguro utilizando PHP</a>, vou mostrar uma das maneiras para instalar o framework que o pessoal do
WSO2 disponibiliza para criação e consumo de serviços em PHP, conhecido como:
<a href="http://wso2.org/downloads/wsf/php">WSO2 Web Services Framework <em>for PHP</em></a>.</p>

<p>Na página de <a href="http://wso2.org/downloads/wsf/php">downloads do WSO2 Web Services Framework <em>for PHP</em></a>, é possível escolher entre 3 opções
de instalação, então exemplificar a fundo apenas uma e colocar uma breve
descrição das outras.</p>

<h2>Binary Distribution</h2>

<p>É o framework já compilado e com a DLL dentro que serve para as pessoas que a
utilizarão em ambientes Windows, não terá muito trabalho, apenas colocar a DLL
na pasta correta e configurar o seu <em>php.ini</em>. Essa é a opção mais prática -
na minha opinião - para Windows (deixarei essa para uma próxima, não tenho
ambiente para isso - ainda).</p>

<h2>PECL Distribution</h2>

<p>Em teoria é a mais fácil de todas. Mas por que &#8220;em teoria&#8221;? Passei dois dias
realizando diversas configurações na minha máquina para que isso funcionasse
corretamente, perguntei no <a href="http://wso2.org/forum/thread/9553">fórum</a> se
alguém poderia me ajudar a solucionar, mas desisti. Parti para a maneira
&#8220;clássica&#8221;, o famoso <a href="/glossario/#CMM">CMM</a>, que descrevo abaixo.</p>

<h2>Source Distribution</h2>

<p>Essa versão é o <a href="https://wso2.org/repos/wso2/trunk/wsf/php/">código-fonte do WSO2 Web Services Framework <em>for
PHP</em></a> (aberto, hein!) e aqui temos
duas opções de download, com apenas uma diferença mínima: o compactador. Uma
foi compactada utilizando ZIP e outra TAR/GZ. E ambas será necessário
compilação, com os bons e velhos comandos: <em>./configure</em>, <em>make &amp;&amp; make
install</em>.</p>

<p>Mas, chega de papo, vamos por a mão na &#8220;massa&#8221;.</p>

<h3>Instalando as dependências</h3>

<p>As dependências para funcionamento do framework, não são muitas:</p>

<ul>
<li><a href="http://wso2.org/downloads/wsf/c">WSO2 Web Services Framework <em>for C</em></a></li>
<li>PHP 5.1.1 ou superior</li>
<li>Bibliotecas libxml2 e OpenSSL</li>
</ul>


<h3>WSO2 Web Services Framework <em>for C</em></h3>

<p>Para quem tá acostumado, são os velhos conhecidos, bastando baixar a última
versão (no meu caso a 2.0.0):</p>

<pre><code>wget http://dist.wso2.org/products/wsf/c/2.0.0/wso2-wsf-c-src-2.0.0.tar.gz
tar xfvz wso2-wsf-c-src-2.0.0.tar.gz
cd wso2-wsf-c-src-2.0.0
./configure
make
sudo make install
</code></pre>

<h3>PHP 5.1.1 ou superior</h3>

<p>Não vou entrar nos méritos de instalação do PHP, pois imagino que isso esteja
mais do que documentado na internet por aí a fora (para os preguiçosos -
google: <a href="http://www.google.com.br/#hl=pt-BR&amp;source=hp&amp;q=instala%C3%A7%C3%A3o+do+php+no+ubuntu&amp;btnG=Pesquisa+Google&amp;meta=&amp;aq=f&amp;aqi=&amp;aql=&amp;oq=instala%C3%A7%C3%A3o+do+php+no+ubuntu&amp;gs_rfai=&amp;fp=fbe0f18c81cbb156">instalação do php no ubuntu</a>).</p>

<h3>Bibliotecas libxml2 e OpenSSL</h3>

<p>O comando para instalar as dependências é:</p>

<pre><code>sudo apt-get install libxml2 openssl
</code></pre>

<p>E com todas as dependências já instaladas e funcionando, podemos utilizar um
<em>phpinfo()</em>; para conferir:</p>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/config-php-libxml2-openssl.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/config-php-libxml2-openssl-300x187.png" alt="" /></a></p>

<h3>Compilação do WSF/PHP</h3>

<h4>CMM</h4>

<p>E agora, a instalação propriamente dita, utilizando novamente os pacotes da
versão 2.0.0:</p>

<pre><code>wget http://dist.wso2.org/products/wsf/php/2.0.0/wso2-wsf-php-src-2.0.0.tar.gz
./configure
make
sudo make install
</code></pre>

<h4>1, 2, 3, testando&#8230;</h4>

<p>Estamos quase chegando lá&#8230;</p>

<p>Vamos copiar dois arquivos do diretório <em>samples</em> (um cliente e um servidor)
para o diretório do servidor web (no meu caso: <em>/var/www/samples</em>) e ver se
tudo funcionou:</p>

<pre><code>sudo mkdir -p /var/www/samples/
sudo cp samples/math_* /var/www/samples/.
</code></pre>

<p>Indo ao navegador, basta abrir o endereço <a href="http://localhost/samples/math_client.php">http://localhost/samples/math_client.php</a> e conferir tudo funcionando:</p>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wsf-php-sample-math.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wsf-php-sample-math-300x176.png" alt="" /></a></p>

<h3>Conclusão</h3>

<p>Ainda não consigo avaliar até onde é válido ou interessante utilizar esse
framework, não pesquisei a fundo ainda o funcionamento e as vantagens dele
sobre as implementações como <a href="http://www.php.net/soap">SOAP</a> (nativa do PHP)
<a href="http://nusoap.sourceforge.net/">NuSOAP</a>.</p>

<p>Mas o fato de ser uma instalação que não pode ser feita em &#8220;qualquer&#8221;
servidor, ainda mais no Brasil onde as empresas de hospedagens normalmente não
instalam extensões de terceiros e o preço para ter um servidor próprio não é
tão acessível, pode acabar ficando inviável.</p>

<p>Realizarei testes mais profundos para verificar as verdadeiras vantagens dessa
abordagem na implementação dos serviços, só que - novamente - ficará para um
outro post.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
  
    <h1 class="entry-title"><a href="/blog/2010/04/wso2-enterprise-service-bus-manipulando-erros-em-endpoints/">WSO2 Enterprise Service Bus - Manipulando Erros Em Endpoints</a></h1>
    
    


  <p class="meta">
    








  


<time datetime="2010-04-19T11:54:27-03:00" pubdate data-updated="true">Apr 19<span>th</span>, 2010</time>
    
     | <a href="/blog/2010/04/wso2-enterprise-service-bus-manipulando-erros-em-endpoints/#disqus_thread">Comments</a>
    
  </p>


  </header>


  <div class="entry-content"><p>A manipulação de erros em <em>endpoints</em> é uma situação crítica e importante em
qualquer publicação da <a href="http://wso2.org/projects/esb/java">WSO2 Enterprise Service Bus</a>. Neste artigo, <a href="http://wso2.com/about/engineers/supun-kamburugamuva/">SupunKamburugamuva</a> descreveu
como manipular os erros no nível de <em>endpoint</em>.</p>

<p><strong>Nota de tradução:</strong> O artigo original foi escrito em inglês e pode ser lido em: <a href="http://wso2.org/library/articles/wso2-enterprise-service-bus-endpoint-error-handling">WSO2 Enterprise Service Bus - Endpoint Error Handling </a></p>

<h2>WSO2 Enterprise Service Bus - Manipulando erros em <em>endpoints</em></h2>

<h3>Conteúdo</h3>

<ul>
<li><a href="#ManipulandoErrosEndpoint_Terminologia">Terminologia</a></li>
<li><a href="#ManipulandoErrosEndpoint_Introducao">Introdução</a></li>
<li><a href="#ManipulandoErrosEndpoint_Importante">Qual a importância da manipulação de erros?</a></li>
<li><a href="#ManipulandoErrosEndpoint_Conceitos">Conceitos</a></li>
<li><a href="#ManipulandoErrosEndpoint_SituacoesEndpoint">Situações de <em>endpoint</em></a>

<ul>
<li><a href="#ManipulandoErrosEndpoint_SituacoesEndpointActive"><em>Active</em></a></li>
<li><a href="#ManipulandoErrosEndpoint_SituacoesEndpointTimeout"><em>Timeout</em></a></li>
<li><a href="#ManipulandoErrosEndpoint_SituacoesEndpointSuspended"><em>Suspended</em></a></li>
</ul>
</li>
<li><a href="#ManipulandoErrosEndpoint_ConfiguracaoEndpoint">Configurações do <em>Leaf endpoint</em></a>

<ul>
<li><a href="#ManipulandoErrosEndpoint_ConfiguracaoEndpointExemplo">Exemplo de configuração</a></li>
</ul>
</li>
<li><a href="#ManipulandoErrosEndpoint_FailOverEndpoint"><em>Fail-Over Endpoint</em></a>

<ul>
<li><a href="#ManipulandoErrosEndpoint_FailOverEndpointExemplo">Exemplo de configuração</a></li>
</ul>
</li>
<li><a href="#ManipulandoErrosEndpoint_Conclusao">Conclusão</a></li>
<li><a href="#ManipulandoErrosEndpoint_ApendiceA">Apêndice A</a></li>
</ul>


<h3><a name="ManipulandoErrosEndpoint_Terminologia"></a>Terminologia</h3>

<p><em>Service Provider endpoint</em>: WSO2 Enterprise Service Bus atua como uma central
de distribuição, entregando as mensagens recebidas dos clientes aos <em>service
provider endpoints</em>.</p>

<p><em>WSO2 Enterprise Service Bus Endpoint</em>: Esta é a representação do <em>service
provider endpoint</em>, omitida internamente na configuração do WSO2 Enterprise
Service Bus.</p>

<h3><a name="ManipulandoErrosEndpoint_Introducao"></a>Introdução</h3>

<p>Corporações são complexamente estruturadas e compostas por centenas de
aplicações com semânticas completamente diferentes. Algumas dessas aplicações
são desenvolvidas personalizadamente, algumas são adquiridas de terceiros e
outras podem ser a combinação de ambas; e podem ser operadas em diferentes
ambientes e sistemas. Muitas aplicações rodam em diferentes sistemas, o que
faz isso ser muito complexo. E devido a esses fatores, isto é vital a
integração entre as diferentes aplicações.</p>

<p>O WSO2 Enterprise Service Bus tem a capacidade de prover a tecnologia para
integrar essas aplicações, as quais podem ser definidas como o estado da arte
para <a href="http://pt.wikipedia.org/wiki/EAI">EAI</a>, baseadas nos princípios do
<a href="/glossario/#SOA">SOA</a>. Com a WSO2 Enterprise Service Bus, o processo completo
pode ser alcançado pela realização de várias tarefas na mensagem -
transformação (<em>transformation</em>), roteamento (<em>routing</em>) e troca de transporte
(<em>transport switching</em>) - antes do envio ao <em>service provider</em>.</p>

<p>A configuração no WSO2 Enterprise Service Bus é feita em etapas, são elas:</p>

<ul>
<li><em>Mediators</em></li>
<li><em>Proxy services</em></li>
<li><em>Endpoints</em></li>
<li><em>Tasks</em></li>
</ul>


<p>Os<em> Mediators</em> são componentes funcionais dentro do WSO2 Enterprise Service
Bus, eles fazem várias coisas como gravação de log (<em>logging</em>), transformação
(<em>XSLT transformation</em>), envia mensagens externas, filtros baseados em
<em>XPath</em>, etc. Então os <em>mediators</em> são o núcleo da mensagem processada dentro
do WSO2 Enterprise Service Bus. A última etapa da mensagem dentro do WSO2
Enterprise Service Bus é o envio da mensagem de resposta para um <em>services
provider</em>. Quanto ao WSO2 Enterprise Service Bus é responsável pelo envio da
mensagem para um serviço de escuta de <em>endpoint</em>. As mensagens enviadas do
WSO2 Enterprise Service Bus podem ser muito diferentes da mensagem recebida.
Por exemplo, as mensagens recebidas podem ser <em>SOAP 1.1 over HTTP</em>. Mas WSO2
Enterprise Service Bus pode enviar a mensagem para o serviço como <em>SOAP 1.2
over JMS</em>. Neste caso o <em>endpoint</em> exposto para o cliente é <em>SOAP 1.1 over
HTTP</em>, o atual <em>endpoint</em> é <em>SOAP 1.2 over JMS</em>.</p>

<p>Um Endpoint é uma abstração do <em>services provider</em>. Uma vez que a mensagem é
enviada usando um Mediator, ele deve saber qual é o <em>endpoint services
provider</em>. O Endpoint é capaz de prover essa informação. No cenário ideal o
serviço de endpoint aceita requisições de mesmo tipo, WSO2 ESB pode ser usado
para balanceamento de carga (Load Balancer). A principal razão por trás disso
tudo é que esses endpoints tem mesmas funcionalidades e é natural vê-las como
uma coisa só.</p>

<p>WSO2 Enterprise Service Bus tem o conceito de construção de endpoints para
representar <em>endpoint services provider</em>. Seguindo os Endpoints construídos
sobre o WSO2 Enterprise Service Bus.</p>

<ol>
<li>Address Endpoint</li>
<li>WSDL Endpoint</li>
<li>Default Endpoint</li>
<li>Load Balancing Endpoint</li>
<li>Fail-Over Endpoint</li>
</ol>


<p>Dos itens mencionados acima, os mais utilizados são o Address e o WSDL
Endpoints. Cada Endpoint tem seu próprio XML de configuração, escrito na
linguagem Synapse. Synapse é uma linguagem XML usada para configurar a
Enterprise Service Bus.</p>

<p>Até o Endpoint enviar a mensagem de resposta, pode encontrar vários erros de
transporte. Por exemplo, a conexão pode dar timeout ou pode ser fechada pelo
serviço atual.</p>

<h3><a name="ManipulandoErrosEndpoint_Importante"></a>Qual a importância da manipulação de erros?</h3>

<p>WSO2 Enterprise Service Bus é uma aplicação de longa duração e nesse tempo
falhas podem ocorrer. Retiring on transient failures enhances the fault
tolerance of a system. Para a WSO2 Enterprise Service Bus, essas falhas podem
ser falha de conexão entre o <em>services provider</em> e a WSO2 Enterprise Service
bus, erro em alguma operação do banco de dados e assim por diante, sendo que
as falhas de comunicação são mais frequentes.</p>

<p>Então a manipulação de erros é a chave para o sucesso de qualquer publicação
na Enterprise Service Bus. Muitas vezes nós utilizamos TCP, as pessoas podem
perguntar, como podem ocorrem erros? O protocolo TCP é muito confiável, não é?
Mas não na vida real. Mensagens pode falhar ou se perder devido a diversas
razões na rede TCP. Esses erros são muito raros, mas podem ocorrer. Para
entender a importância da manipulação de erros vamos considerar o seguinte
cenário.</p>

<p>Se a WSO2 Enterprise Service Bus não estiver devidamente configurada para
aceitar erros, ocasionalmente, quando eles ocorrerem, o Endpoint será marcado
com uma falha. Isto leva para uma mensagem de falha. Por padrão, o Endpoint
será marcado como falho por um longo tempo. Os erros encontrados na WSO2
Enterprise Service Bus podem ser um problema intermitente que ocorrem uma vez
por semana, mas devido a singularidade do erro, mensagens posteriores poderão
ser perdidas. Claro que você pode configurar a WSO2 Enterprise Service Bus
para manipular estas situações e este artigo dará a você uma maior compreensão
sobre como trabalhar com Endpoints e otimizar as suas configurações.</p>

<h3><a name="ManipulandoErrosEndpoint_Conceitos"></a>Conceitos</h3>

<p>Nós chamamos Address, Default and WSDL Endpoints como Leaf Endpoints, que
enviam a mensagem. A Load Balance ou Fail-Over Endpoints usa um ou vários Leaf
Endpoints para enviar a mensagem. Então um Load Balance ou Fail-Over Endpoint
é um agrupamento lógico de Leaf Endpoints. Um Load Balance ou Fail-Over
Endpoint nunca envia uma mensagem diretamente, ao invés de enviar ela delega
aos Leaf Endpoints, dependendo da configuração e da situação (status).</p>

<p>Endpoint é uma abstração do servidor remoto, onde o WSO2 Enterprise Service
Bus envia a mensagem de saída. Ela pode especificar quais as propriedades
usadas para enviar a mensagem, por exemplo, pode especificar o formato - como
SOAP 1.1 - ou pode especificar a necessidade de utilizar uma política de
segurança com WS Security para responder a mensagem.</p>

<p>WSO2 Enterprise Service Bus Endpoint tem configurações para especificar o
comportamento diante de erros, que podem ocorrer entre a WSO2 Enterprise
Service Bus e o atual Endpoint.</p>

<p>Um Endpoint tem uma situação, mas antes vamos para as configurações de
Endpoint para vermos como as transições acontecem.</p>

<h3><a name="ManipulandoErrosEndpoint_SituacoesEndpoint"></a>Situações do Endpoint</h3>

<p>Em alguns momentos a situação do Endpoint pode ser Active, Timeout, Suspended
ou Off. A situação de transição do Endpoint normalmente acontece na base de
mensagens. E para colocarmos uma situação de Off num Endpoint (utilizando para
issoJMX), então esta situação não é a Situação do Diagrama de Transição. Vamos
analisar as diferentes situações do endpoint em detalhes:</p>

<ul>
<li>Active: O endpoint está ativo e funcionando.</li>
<li>Timeout: Foram encontrados erros no endpoint, que passa a ser um candidato a ser suspenso, mas pode continuar enviando mensagens. Se os erros persisterem o endpoint será suspenso.</li>
<li>Suspended: Foram encontrados erros no endpoint e é enviado para a situação onde não pode enviar requisições. Ele não pode enviar mensagens e mensagens recebidas por ele resultarão em falhas.</li>
<li>Off: O endpoint não está ativo.</li>
</ul>


<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/state_2.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/state_2.png" title="Toda situação de transição acontece na mensagem. Por exemplo, se a duração da suspensão é expirada, na situação Suspended, o endpoint continuará na situação Suspensed até que uma nova mensagem chegue e seja bem sucedida." alt="&quot;Toda situação de transição acontece na mensagem. Por exemplo, se a duração da suspensão é expirada, na situação Suspended, o endpoint continuará na situação Suspensed até que uma nova mensagem chegue e seja bem sucedida.&quot;" /></a></p>

<p>Toda situação de transição acontece na mensagem. Por exemplo, se a duração da
suspensão é expirada, na situação Suspended, o endpoint continuará na situação
Suspensed até que uma nova mensagem chegue e seja bem sucedida.</p>

<h4><a name="ManipulandoErrosEndpoint_SituacoesEndpointActive"></a>Active</h4>

<p>Quando o WSO2 Enterprise Service Bus inicializa, os endpoints estão ativos (na
situação Active) e prontos para enviar mensagens. Se o usuário não desligar os
endpoints (situação Off), será Active até que ocorra um erro.</p>

<p>Quando ocorrer um erro, o Endpoint poderá ser configurado como: Active,
Timeout ou Suspended. Todo erro tem um código. As configurações de Endpoint
possibilitam que você defina os erros que colocarão o Endpoint nos modos
Timeout e Suspension. Se um erro não foi definido como Timeout ou Suspended,
será ignorado.</p>

<p>Os erros são manipulados de três formas:</p>

<ul>
<li>Endpoint na situação SUSPENDED</li>
<li>Endpoint na situação TIMEOUT</li>
<li>Ignorado e mantido no ACTIVE</li>
</ul>


<p>Se um erro específico não possui um <em>timeout</em> configurado, então a conexão
será fechada e o erro será tratado como TIMEOUT. Todos os outros erros terão o
Endpoint colocado como SUSPENDED.</p>

<p>Quando um erro ocorrer no Endpoint, será visto primeiramente se ele é um erro
para colocar na situação TIMEOUT. Caso contrário, será verificado se é para
colocar na situação SUSPENDED.</p>

<h4><a name="ManipulandoErrosEndpoint_SituacoesEndpointTimeout"></a>Timeout</h4>

<p>Nesta situação o Endpoint pode ter na mensagem encaminhada um número máximo de
tentativas. Se as falhas persistirem e o número máximo for excedido, o
Endpoint será marcado como SUSPENDED. Mas se alguma mensagem for processada o
Endpoint será marcado como ACTIVE.</p>

<p>Por exemplo, vamos dizer que o número de tentativas é 3 para esta situção. Se
as próximas três mensagens são enviadas usando este Endpoint, e encontramos um
erro, o endpoint é colocado como SUSPENDED. Mas se alguma das mensagens
anteriores for bem sucedida neste Endpoint, que estava SUSPENDED, ele então
será colocado como ACTIVE.</p>

<h4><a name="ManipulandoErrosEndpoint_SituacoesEndpointSuspended"></a>Suspended</h4>

<p>Um endpoint suspended não pode ser usado para enviar mensagens. Depois que o
endpoint é colocado nesta situação, pode ser tentado novamente após o tempo
configurado. Depois deste de passado o tempo de expiração, o WSO2 Enterprise
Service Bus tentará encaminhar as mensagens deste endpoint. Se a mensagem for
bem-sucedida, então o WSO2 Enterprise Service Bus marcará este endpoint como
ACTIVE. Se a próxima mensagem falhar, o endpoint será colocado como SUSPENDED
ou TIMEOUT dependendo do erro que ocorrer.</p>

<p>O próximo período é calculado usando a seguinte fórmula:</p>

<pre><code>Next suspension time period = Max (Initial Suspension duration * (progression factor try count), Maximum Duration)
</code></pre>

<p>Todas as variáveis da fórmula acima são valores configurados usados para
calcular o número de tentativas (contabilizadas após o endpoint ser marcado
SUSPENDED). Com a incrementação do número de tentativas (try count), o próximo
período de suspensão (next suspension time period) também será incrementado. O
incremento é vinculado a máxima duração (maximum duration).</p>

<h3><a name="ManipulandoErrosEndpoint_ConfiguracaoEndpoint"></a>Configurações do Leaf Endpoint</h3>

<p>Esta é a configuração do endereço do endpoint. Uma vez que estamos
interessados apenas nas configurações de erros, as mesmas também podem ser
aplicadas aos WSDL Endpoints. As configurações de maninpulação de erros são:</p>

<ol>
<li>timeout</li>
<li>markForSuspension</li>
<li>suspendOnFailure</li>
</ol>


<p>Vamos ver as configurações individualmente.</p>

<div><script src='https://gist.github.com/2907143.js'></script>
<noscript><pre><code>&lt;html&gt;&lt;body&gt;You are being &lt;a href=&quot;https://github.com/gist/2907143&quot;&gt;redirected&lt;/a&gt;.&lt;/body&gt;&lt;/html&gt;</code></pre></noscript></div>


<h4>Timeout</h4>

<table>
  <thead>
    <tr>
      <th>Nome</th>
      <th>Valores</th>
      <th>Default</th>
      <th>Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>duration</td>
      <td>miliseconds</td>
      <td>60000</td>
      <td>Tempo máximo de conexão. Se o endpoint remoto não responder neste tempo, ele será tratado como timeout</td>
    </tr>
    <tr>
      <td>action</td>
      <td>discard, fault, none</td>
      <td>none</td>
      <td>Tempo para descartar, invocará uma exceção (fault handler) ou responderá como tempo de execução excedido</td>
    </tr>
  </tbody>
</table>


<h4>markForSuspension</h4>

<table>
  <thead>
    <tr>
      <th>Nome</th>
      <th>Valores</th>
      <th>Padrão</th>
      <th>Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>errorCodes</td>
      <td>Códigos de erro separados por vírgula</td>
      <td>101504, 101505</td>
      <td>Lista de erros que envia o endpoint na situação &#8220;TIMEOUT retriesBeforeSuspension&#8221;</td>
    </tr>
    <tr>
      <td>retriesBeforeSuspension</td>
      <td>Integer</td>
      <td>0</td>
      <td>Na situação TIMEOUT o número de tentativas é igual ao número de requisições menos um e pode falhar antes do endpoint ser marcado como &#8220;SUSPENDED retryDelay&#8221;. Esta configuração é por Endpoint e não por mensagem. Muitas mensagens podem ser tentadas ao mesmo tempo e falhar, com isso o número de tentativas restantes será reduzido.</td>
    </tr>
    <tr>
      <td>retryDelay</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>


<h4>suspendOnFailure</h4>

<table>
  <thead>
    <tr>
      <th>Nome</th>
      <th>Valores</th>
      <th>Padrão</th>
      <th>Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>errorCodes</td>
      <td>Códigos de erro separados por vírgula</td>
      <td>Todos os erros, exceto os especificados em markForSuspension</td>
      <td>Erros que enviam o endpoint para a situação SUSPENDED</td>
    </tr>
    <tr>
      <td>initialDuration</td>
      <td>miliseconds</td>
      <td>60 x 60 x 1000</td>
      <td>Depois que um endpoint fica SUSPENDED, esperará por essa quantidade de tempo antes de tentar enviar a mensagem. Todas as mensagens que forem recebidas durante este período resultarão na ativação de <em>fault sequence</em>.</td>
    </tr>
    <tr>
      <td>progressionFactor</td>
      <td>Integer</td>
      <td>1</td>
      <td>O endpoint tentará enviar as mensagens depois da <em>initialDuration</em>. Utilizando a fórmula: next duration = Max(initialDuration x progressionFactor ^ retry count, maximumDuration)</td>
    </tr>
    <tr>
      <td>maximunDuration</td>
      <td>miliseconds</td>
      <td>Long.MAX_VALUE</td>
      <td>Limite superior da duração de tentativas</td>
    </tr>
  </tbody>
</table>


<h4><a name="ManipulandoErrosEndpoint_ConfiguracaoEndpointExemplo"></a>Exemplo de configuração</h4>

<div><script src='https://gist.github.com/2907164.js'></script>
<noscript><pre><code>&lt;html&gt;&lt;body&gt;You are being &lt;a href=&quot;https://github.com/gist/2907164&quot;&gt;redirected&lt;/a&gt;.&lt;/body&gt;&lt;/html&gt;</code></pre></noscript></div>


<p>Aqui nós mudamos a situação TIMEOUT do endpoint para os erros 101504 e 101505.
Depois desse processo, três requisições podem falhar por um ou desses erros
antes de alterar a situação do endpoint para SUSPENDED.</p>

<p>Nós colocamos o endpoint em suspensão para os erros 101500, 101501, 101506,
101507 e 101508. Mas como você pode ver, nós ignoramos o erro 101503. Se o
erro 101503 ocorrer, o endpoint será marcado como ACTIVE.</p>

<p>Para mais informações sobre códigos de erro, ver APÊNDICE A.</p>

<h3><a name="ManipulandoErrosEndpoint_FailOverEndpoint"></a>Fail-Over Endpoint</h3>

<p>Com essa configuração, se ocorrer um erro durante o processo de transmissão da
mensagem, a mesma será perdida. A mensagem que falhou não terá uma nova
tentativa de envio. Esses erros ocorrem raramente, mas falhas em mensagens
ainda podem ocorrer. Em algumas aplicações essas falhas nas mensagens perdidas
são aceitáveis, mas algumas vezes essas falhas não são aceitáveis e o Fail-
Over endpoint é a solução ideal.</p>

<p>Abaixo uma configuração para fail-over endpoints. No nível de configuração, um
fail-over é um agrupamento lógico de um ou mais endpoints.</p>

<div><script src='https://gist.github.com/2907546.js'></script>
<noscript><pre><code>&lt;html&gt;&lt;body&gt;You are being &lt;a href=&quot;https://github.com/gist/2907546&quot;&gt;redirected&lt;/a&gt;.&lt;/body&gt;&lt;/html&gt;</code></pre></noscript></div>


<p>Quando uma mensagem chega a situação Fail-Over, será atráves da lista de fail-
over endpoints que escolherá a primeira situação entre ACTIVE ou TIMEOUT.
Então será enviada a mensagem usando esse endpoint. Se ocorrer um erro
enquanto a mensagem é enviada, o fail-over, através da lista de endpoints, irá
começar novamente e tentará enviar a mensagem usando o primeiro endpoint.</p>

<p>Alguns erros colocam o endpoint na situação TIMEOUT e outros deixam o endpoint
com a situação ACTIVE. Nesses casos as tentativas acontecem usando o mesmo
endpoint. Se ocorrer um erro com o primeiro endpoint do grupo fail-over e esse
erro não colocar o endpoint como SUSPENDED, as próximas tentativas ocorrerão
usando o mesmo endpoint.</p>

<p>O fail-over dá a prioridade para o primeiro endpoint que não esteja como
SUSPENDED. Então será enviada a mensagem através do primeiro endpoint do grupo
fail-over, enquanto não for marcado como SUSPENDED. Quando o primeiro endpoint
é marcado como SUSPENDED as requisições serão enviadas usando o segundo
endpoint. Quando o primeiro endpoint estiver pronto para ser utilizado
novamente, ele tentará de novo, mesmo que o segundo endpoint ainda esteja
ativo.</p>

<p>Se houver apenas um serviço endpoint e falhas não são toleráveis, os fail-
overs são possíveis com apenas um endpoint.</p>

<p>Abaixo um exemplo de fail-over com um endpoint.</p>

<h4><a name="ManipulandoErrosEndpoint_FailOverEndpointExemplo"></a>Exemplo de configuração de Fail-Over Endpoint</h4>

<div><script src='https://gist.github.com/2907774.js'></script>
<noscript><pre><code>&lt;html&gt;&lt;body&gt;You are being &lt;a href=&quot;https://github.com/gist/2907774&quot;&gt;redirected&lt;/a&gt;.&lt;/body&gt;&lt;/html&gt;</code></pre></noscript></div>


<p>Nesse exemplo (Sample_First) o endpoint é marcado como TIMEOUT quando a
conexão excede o tempo máximo de duração, a conexão é fechada ou envia erros
de IO, respectivamente, os códigos de erro: 101504, 101505 e 101500. Para
todos os outros erros, será marcado como SUSPENDED. Quando esse erro ocorrer,
o fail-over tentará usando o primeiro endpoint que não estiver SUSPENDED,
neste caso é o mesmo endpoint (Sample_First). O número de tentativas inicia
com a configuração <em>retriesBeforeSuspension</em> e será reduzida a cada mensagem
que falhar, até chegar ao zero. É importante notar que a configuração da
contagem de tentativas não é por mensagem, mas sim por endpoint.</p>

<p>Nesta configuração nós assumimos que os erros são raros e quando acontecem,
basta tentar novamente. Mas se ocorrem frequentemente e continuamente é
necessário atenção imediata para que voltem para a situação normal.</p>

<h3><a name="ManipulandoErrosEndpoint_Conclusao"></a>Conclusão</h3>

<p>A manipulação de erros é crucial para a publicação de endpoints. Os erros
devem ser descobertos nos testes, é recomendado executar muitos testes de
carga e melhorar a performance das configurações do endpoint preparando-o para
os variados erros que podem ocorrer.</p>

<h3><a name="ManipulandoErrosEndpoint_ApendiceA"></a>Apêndice A</h3>

<table>
  <thead>
    <tr>
      <th>Código</th>
      <th>Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>101000</td>
      <td>Receiver IO error sending</td>
    </tr>
    <tr>
      <td>101001</td>
      <td>Receiver IO error receiving</td>
    </tr>
    <tr>
      <td>101500</td>
      <td>Sender IO error sending</td>
    </tr>
    <tr>
      <td>101501</td>
      <td>Sender IO error receiving</td>
    </tr>
    <tr>
      <td>101503</td>
      <td>Connection failed</td>
    </tr>
    <tr>
      <td>101504</td>
      <td>Connection timed out</td>
    </tr>
    <tr>
      <td>101505</td>
      <td>Connection closed</td>
    </tr>
    <tr>
      <td>101506</td>
      <td>HTTP protocol violation</td>
    </tr>
    <tr>
      <td>101507</td>
      <td>Connect cancel</td>
    </tr>
    <tr>
      <td>101508</td>
      <td>Connect timeout</td>
    </tr>
    <tr>
      <td>101509</td>
      <td>Send abort</td>
    </tr>
  </tbody>
</table>


<h3>Autor</h3>

<p>Supun Kamburugamuva, Software Engineer, WSO2, supun@wso2.com</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
  
    <h1 class="entry-title"><a href="/blog/2010/04/novidades-do-proximo-wso2-data-services-server-2-5-x/">Novidades Do Próximo WSO2 Data Services Server (2.5.x)</a></h1>
    
    


  <p class="meta">
    








  


<time datetime="2010-04-09T13:24:27-03:00" pubdate data-updated="true">Apr 9<span>th</span>, 2010</time>
    
     | <a href="/blog/2010/04/novidades-do-proximo-wso2-data-services-server-2-5-x/#disqus_thread">Comments</a>
    
  </p>


  </header>


  <div class="entry-content"><p>A versão RC2 do WSO2 Data Services Server 2.5.0 nos mostrou que está com novas
opções e funcionalidades muito úteis, algumas que estavam até fazendo falta.
Claro que a adoção do WSO2 Carbon 3.0, traz várias diferenças nos recursos e
interface em toda a suíte. Mas vamos partir para o que interessa.</p>

<ul>
<li><a href="#Dashboard">Dashboard</a></li>
<li><a href="#CarbonDataSources">Carbon Data Sources</a></li>
<li><a href="#ArrayType">Array type</a></li>
<li><a href="#DefaultValuesInputMappings">Default values in input mappings</a></li>
<li><a href="#DataValidationLogic">Data Validation Logic</a></li>
<li><a href="#WIPServices">WIP services</a></li>
<li><a href="#ContractFirst">Contract first</a></li>
<li><a href="#BatchMode">Batch mode</a></li>
<li><a href="#Boxcarring">Boxcarring</a></li>
<li><a href="#Eventing">Eventing</a></li>
<li><a href="#BinaryData">Binary Input/Output data</a></li>
<li><a href="#JMX">JMX</a></li>
<li><a href="#QueryProperties">Query Properties</a></li>
<li><a href="#Conclusao">Conclusão</a></li>
</ul>


<h2><a name=""></a>Dashboard</h2>

<p>Com a atualização para o WSO2 Carbon 3.0, foi implantando um <em>Dashboard</em> que
pode conter informações variadas. Essas informações podem ser personalizadas
utilizando <em>gadgets</em>. Aliás, essa atualização pode ser notada em toda a suíte
que utilizam o novo Carbon.</p>

<h2><a name=""></a>Carbon Data Sources</h2>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-CarbonDataSources-01.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-CarbonDataSources-01-150x150.png" alt="" /></a>
<a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-CarbonDataSources-02.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-CarbonDataSources-02-150x150.png" alt="" /></a></p>

<p>Agora ficará muito mais fácil gerenciar conexões às várias base de dados. Com
<em>Carbon Data Sources</em>, será possível apontar no <a href="/glossario/#DataServices">Data Service</a> qual <em>data source</em> utilizar, e cada
ambiente (teste, desenvolvimento, homologação ou produção) terão suas próprias
configurações, bastará manter o mesmo nome.</p>

<h2><a name=""></a>Array Type</h2>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-ArrayType-01.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-ArrayType-01-150x150.png" alt="" /></a>
<a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-ArrayType-02.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-ArrayType-02-150x150.png" alt="" /></a></p>

<p>Poderemos ter entradas do tipo <em>array</em> ou <em>scalar</em>, onde essas entradas podem
conter valores de diferentes tipos, como: <em>string</em>, <em>integer</em>, <em>real</em>,
<em>double</em>, <em>numeric</em>, <em>tinyint</em>, <em>smallint</em>, <em>bigint</em>, <em>date</em>, <em>time</em>,
<em>timestamp</em>, <em>bit</em>, <em>oracle ref cursor</em> ou <em>binary</em>.</p>

<h2><a name=""></a>Default values in input mappings</h2>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-DefaultValuesInputMappings.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-DefaultValuesInputMappings-150x150.png" alt="" /></a></p>

<p>No caso do tipo de entrada <em>scalar</em>, poderá ser indicado um valor padrão para
a entrada.</p>

<h2><a name=""></a>Data Validation Logic</h2>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-DataValidationLogic-01.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-DataValidationLogic-01-150x150.png" alt="" /></a>
<a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-DataValidationLogic-02.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-DataValidationLogic-02-150x150.png" alt="" /></a></p>

<p>Os dados de entrada poderão ser validados utlizando alguns validadores
padrões:</p>

<ul>
<li><strong>Long Range</strong>: com mínimo e máximo de opção;</li>
<li><strong>Double Range</strong>: com mínimo e máximo de opção;</li>
<li><strong>Length</strong>: com mínimo e máximo de opção;</li>
<li><strong>Pattern</strong>: com pattern de opção;</li>
<li><strong>Custom</strong>: com a classe de opção.</li>
</ul>


<h2><a name=""></a>WIP Services</h2>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wip_dbs.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wip_dbs-150x150.png" alt="" /></a>
<a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wip_service_list.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wip_service_list-150x150.png" alt="" /></a></p>

<p>Os serviços que ainda não estão finalizados, estão passando por correção ou
qualquer outro motivo, poderão ser marcados como: &#8220;Work in progress&#8221;. Isso
evitará erros e os clientes não conseguirão consumir o serviço.</p>

<h2><a name=""></a>Contract first</h2>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wsdl_upload.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wsdl_upload-150x150.png" alt="" /></a>
<a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/dummy_data_source.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/dummy_data_source-150x150.png" alt="" /></a></p>

<p>Com essa funcionalidade, criar <em>data services</em> poderá fica ainda mais simples.
Basta adicionar um contrato (WSDL) com todas as definições e ele criará um
<em>WIP Service</em> para você, sendo necessário apenas você configurar conexões e
preencher as <em>queries</em>.</p>

<h2><a name=""></a>Batch mode</h2>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-BatchMode-01.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-BatchMode-01-150x150.png" alt="" /></a>
<a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-BatchMode-02.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-BatchMode-02-150x150.png" alt="" /></a></p>

<p>Um recurso bastante interessante implementado é o <em>Batch Mode</em>, esse recurso
implementa automaticamente, em todos os métodos que realizam alguma função de
escrita no banco de dados (<em>INSERT</em>, <em>DELETE</em> e <em>UPDATE</em>), o recurso de
invocar uma única vez o serviço, mas realizando operações em vários objetos de
uma única vez, como - por exemplo - um inserir uma listagem de pessoas.</p>

<h2><a name=""></a>Boxcarring</h2>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-Boxcarring-01.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-Boxcarring-01-150x150.png" alt="" /></a>
<a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-Boxcarring-02.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-Boxcarring-02-150x150.png" alt="" /></a></p>

<p>Implementação importante para essa nova versão, <em>boxcarring</em> nada mais é que o
suporte a transações nos serviços, pelas informações coletadas, essa transação
pode ser de dois tipos: <em>SOAP</em> ou <em>Transport</em>.</p>

<h2><a name=""></a>Eventing</h2>

<p>Será um recurso que dará a opção de implementarmos eventos em cima de
determinadas operações, funciona basicamente como uma <em>trigger</em> de banco de
dados.</p>

<h2><a name=""></a>Binary Input/Output Data</h2>

<p>Será possível utilizar dados binários (tipo Base64) tanto para enviar, quanto
para receber.</p>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/binary-input-mapping.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/binary-input-mapping-150x150.png" alt="" /></a>
<a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/binary-output-mapping.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/binary-output-mapping-150x150.png" alt="" /></a></p>

<h2><a name=""></a>JMX</h2>

<p>O WSO2 Data Services Server proverá informações dos serviços publicados,
utilizando Java Management Extensions (JMX).</p>

<h2><a name=""></a>Query Properties</h2>

<p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-QueryProperties-01.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-QueryProperties-01-150x150.png" alt="" /></a>
<a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-QueryProperties-02.png"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2ds-2.5.0-r2-QueryProperties-02-150x150.png" alt="" /></a></p>

<p>As <em>queries</em> podem ter algumas propriedades específicas na execução, ajudando
na questão de performance e limitações.</p>

<h2><a name=""></a>Conclusão</h2>

<p>Essas novas versões que estão para sair, da suíte WSO2 Carbon (3.0) e WSO2
Data Services Server (2.5.0), evoluíram bastante comparativamente as suas
sucessoras. E o que é bem importante, não foi necessária nenhuma alteração
para os serviços que rodam na versão 2.2.1 do WSO2 Data Services Server
funcionarem nessa <em>release</em>, diferentemente da atualização da versão 2.0.x
para a 2.2.x.</p>

<p>Os tópicos que não documentei ainda, provavelmente consiga documentar nas
próximas <em>releases</em>, ou quando achar aonde estão esses recursos, a não ser que
as alterações sejam internas e não fiquem visuais pra nós. Caso queira ajudar
a encontrar e documentar todas as alterações, pode acessar o
<a href="http://builder.wso2.org/~carbon/releases/carbon/3.0.0/">repositório</a> com os
<em>builders</em> (com gerações quase que diárias).</p>

<p>Minha ideia é também exemplificar como utilizar cada uma delas futuramente,
para que não fique dúvidas de como utilizar esses novos recursos. Então, fique
ligado nas atualizações pelo <em>feed</em>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
  
    <h1 class="entry-title"><a href="/blog/2010/04/wso2-business-activity-monitoring-sql-server/">WSO2 Business Activity Monitoring + SQL Server</a></h1>
    
    


  <p class="meta">
    








  


<time datetime="2010-04-06T15:44:57-03:00" pubdate data-updated="true">Apr 6<span>th</span>, 2010</time>
    
     | <a href="/blog/2010/04/wso2-business-activity-monitoring-sql-server/#disqus_thread">Comments</a>
    
  </p>


  </header>


  <div class="entry-content"><p><a href="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2-bam.gif"><img src="http://assets.mcorp.com.br/wp-content/uploads/2010/04/wso2-bam.gif" alt="" /></a>A pedidos do &#8220;chefe&#8221;, realizei o download
e a instalação do <a href="http://wso2.org/downloads/bam">WSO2 Business Activity Monitoring</a> (versão 1.0.1) e parti para os
testes.</p>

<p>Mas como migramos toda a suíte para rodar sobre o SQL Server, configurei tudo
para apontar para o banco de dados do <a href="http://wso2.org/downloads/governance-registry">WSO2 Governance Registry</a>
(arquivo <em>conf/registry.xml</em>) e do <a href="http://wso2.org/downloads/identity">WSO2 Identity Server</a>
(arquivo <em>conf/user-mgt.xml</em>) - maiores explicações ficam para uma outra oportunidade.</p>

<p>Só que ainda ficou uma dúvida no ar! Aonde estavam as configurações de conexão
de banco de dados que armazenam as informações do <a href="/glossario/#BAM">BAM</a>
propriamente dito? Pesquisando nos arquivos instalados encontrei um diretório
&#8220;bam&#8221;, e para minha não-surpresa, lá estavam mais dois diretórios:</p>

<ul>
<li><strong>./bam/database/</strong>: diretório com arquivos da base de dados do H2;</li>
<li><strong>./bam/sql/</strong>: scripts de criação da base de dados em diferentes bancos (H2, SQL Server, MySQL e Oracle).</li>
</ul>


<p>Com essa descoberta, o jeito foi partir para o básico, buscar um arquivo de
configuração que pudesse conter a conexão apontando para esses arquivos.</p>

<pre><code>leonardo@mcorp:~/Applications/wso2/wso2bam-1.0.1$ grep -r h2:database *
conf/registry.xml: jdbc:h2:database/WSO2CARBON_DB
conf/user-mgt.xml: jdbc:h2:database/WSO2CARBON_DB
</code></pre>

<p>Ops, não encontrei nada. Nova tentativa:</p>

<pre><code>leonardo@mcorp:~/Applications/wso2/wso2bam-1.0.1$ grep -r h2 *
[milhões de respostas - ocultadas por mim - que não ajudam em nada]
</code></pre>

<p>Vamos lá, filtrar um pouco mais para quem sabe ser mais feliz:</p>

<pre><code>leonardo@mcorp:~/Applications/wso2/wso2bam-1.0.1$ grep -r jdbc:h2 *
conf/registry.xml: jdbc:h2:database/WSO2CARBON_DB
conf/user-mgt.xml: jdbc:h2:database/WSO2CARBON_DB
repository/dataservices/BAMSummaryGenerationDS.dbs:jdbc:h2:bam/database/WSO2BAM_DB
repository/dataservices/BAMConfigurationDS.dbs:jdbc:h2:bam/database/WSO2BAM_DB
repository/dataservices/BAMStatQueryDS.dbs:jdbc:h2:bam/database/WSO2BAM_DB
repository/dataservices/BAMDataCollectionDS.dbs:jdbc:h2:bam/database/WSO2BAM_DB
repository/dataservices/BAMSummaryQueryDS.dbs:jdbc:h2:bam/database/WSO2BAM_DB
</code></pre>

<p>E agora sim! Com isso descobrimos que ele utiliza alguns <a href="/glossario/#DataServices">data services</a> que realizam o trabalho &#8220;sujo&#8221;.</p>

<p>Então, basta alterarmos todos esses serviços para conectarem na base de dados
criada no SQL Server (dentro de cada serviço tem exemplos). Os serviços são:</p>

<ul>
<li>repository/dataservices/BAMSummaryGenerationDS.dbs</li>
<li>repository/dataservices/BAMConfigurationDS.dbs</li>
<li>repository/dataservices/BAMStatQueryDS.dbs</li>
<li>repository/dataservices/BAMDataCollectionDS.dbs</li>
<li>repository/dataservices/BAMSummaryQueryDS.dbs</li>
</ul>


<p>E carregar o arquivo <em>bam/sql/bam_schema_mssql.sql</em> na base de dados e&#8230;
<em>voilà</em>.</p>

<pre><code>INFO - Server : WSO2 Business Activity Monitor-1.0.1 INFO - WSO2 Carbon started in 6 sec
</code></pre>

<p>Os estudos sobre o WSO2 Business Activity Monitoring continuarão num próximo
capítulo, sempre acompanhado de dicas e descobertas. (:</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/10/resenha-soa-aplicado-integrando-com-web-services-e-alem/">Resenha: SOA aplicado: Integrando com web services e além</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/8o-solisc-nos-vemos-la/">8º SoLiSC - Nos vemos lá</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/lancado-wso2-user-engagement-server-1-0-0/">Lançado: WSO2 User Engagement Server - 1.0.0!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/nos-no-fisl-14/">Nós no FISL14</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/participaremos-do-fisl-14/">Participaremos do FISL 14</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/categorias/arquitetura'>arquitetura (9)</a></li><li><a href='/blog/categorias/avisos'>avisos (3)</a></li><li><a href='/blog/categorias/desenvolvimento'>desenvolvimento (29)</a></li><li><a href='/blog/categorias/eventos'>eventos (6)</a></li></ul>
</section>
<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/tags/identity' style='font-size: 105.71428571428571%'>identity(4)</a> <a href='/blog/tags/oracle' style='font-size: 105.71428571428571%'>oracle(4)</a> <a href='/blog/tags/lancamento' style='font-size: 107.14285714285714%'>lançamento(5)</a> <a href='/blog/tags/software-livre' style='font-size: 108.57142857142857%'>software livre(6)</a> <a href='/blog/tags/carbon' style='font-size: 107.14285714285714%'>carbon(5)</a> <a href='/blog/tags/dss' style='font-size: 130.0%'>dss(21)</a> <a href='/blog/tags/data-services' style='font-size: 128.57142857142858%'>data services(20)</a> <a href='/blog/tags/stratos' style='font-size: 104.28571428571429%'>stratos(3)</a> <a href='/blog/tags/codigo-aberto' style='font-size: 108.57142857142857%'>código aberto(6)</a> <a href='/blog/tags/instalacao' style='font-size: 104.28571428571429%'>instalação(3)</a> <a href='/blog/tags/enterprise-service-bus' style='font-size: 112.85714285714286%'>enterprise service bus(9)</a> <a href='/blog/tags/esb' style='font-size: 118.57142857142857%'>esb(13)</a> <a href='/blog/tags/eclipse' style='font-size: 107.14285714285714%'>eclipse(5)</a> <a href='/blog/tags/java' style='font-size: 104.28571428571429%'>java(3)</a> <a href='/blog/tags/application-server' style='font-size: 107.14285714285714%'>application server(5)</a> <a href='/blog/tags/bam' style='font-size: 105.71428571428571%'>bam(4)</a> <a href='/blog/tags/soa' style='font-size: 110.0%'>soa(7)</a> <a href='/blog/tags/wsas' style='font-size: 107.14285714285714%'>wsas(5)</a> <a href='/blog/tags/wso2' style='font-size: 160.0%'>wso2(42)</a> <a href='/blog/tags/wso2-carbon' style='font-size: 110.0%'>wso2 carbon(7)</a> </span>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("wso2brasil", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/wso2brasil" class="twitter-follow-button" data-show-count="false">Follow @wso2brasil</a>
  
</section>


<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/wso2brasil">@wso2brasil</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'wso2brasil',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - WSO2Brasil -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wso2brasil';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
